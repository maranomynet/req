// Req.js v1.0 - MIT/GPL Licensed - More info: http://mar.anomynet/entries/2009/10/20/23.39.22/
(function(b,c,e,a){if(b[c]==null&&b[e]){b[c]="loading";b[e](a,e=function(){b[c]="complete";b.removeEventListener(a,e,!1)},!1)}})(document,"readyState","addEventListener","DOMContentLoaded");
(function(l,y){var k=[],u='onreadystatechange',j='onload',v=function(e){var c,d=g.assets,a=g.fixUrl,f=[];for(var s=0,x=e.length;s<x;s++){var b=e[s];if(typeof b=='function'){f.push(b)}else if(b&&b!==true){if(b.charAt){c=b;b=d[c]||(d[c]=(d[a(c)]||{src:c}))}else{c=b.id||b.src;d[c]=d[c]||b}if(!b._1&&!b._0){b._1=1;if(!b._3){b._3=1;if(b.src){b.src=a(b.src);d[b.src]=b}var o=b.req;if(o&&o.charAt){b.req=[o]}}o&&f.push.apply(f,v(b.req));f.push(b)}}}return f},h=[],p=function(){var e,c=h.length;if(c>=g.joinLim){var d=[];while(c--){if(h[c].src){d.unshift(g.getJoinStub(h[c]))}}e={src:q.replace(i,d.join(g.joint||'')),_4:h};h=[]}else{e=h.shift();e._2=1}return e},t=function(){if(w=!!(k.length||h.length)){var a=k.shift()||p();if(typeof a=='function'){if(h.length){k.unshift(a);a=p()}else{a();a=l}}if(a&&!a._0){if(a.check&&a.check()){if(h.length&&a[j]){k.unshift(p(),a)}else{a._0=1;if(a[j]){a[j]();a[j]=l}}}else{if((a.join===true||!a.src)&&!a._2){h.push(a)}else{if(h.length&&!a._2){k.unshift(a);a=p()}if(a.src){var f=document.createElement('script');f.charset=a.charset||g.charset||l;f.src=a.src;f[j]=f[u]=function(){if(!f.readyState||/^(loaded|complete)$/.test(f.readyState)){f[u]=f[j]=l;var e=a._4||[a];for(var c=0,d;(d=e[c]);c++){d._0=1;d[j]&&d[j]();d[j]=l}t()}};r?m.insertBefore(f,r):m.appendChild(f);return}a._0=1}}}t()}},w,m,r,n,q,i,g=Req=function(e){i=i||g.urlToken||'%{s}';n=g.baseUrl||i;n+=n.indexOf(i)>-1?'':i;q=g.joinUrl||i;q+=q.indexOf(i)>-1?'':i;m=m||document.getElementsByTagName('head')[0];r=r||m.getElementsByTagName('base')[0];var c=v([].slice.call(arguments,0)),d=c.length;while(d--){delete c[d]._1}k[e===true?'push':'unshift'].apply(k,c);setTimeout(function(){if(!w){t()}},0)};g.joinLim=1;g.fixUrl=function(e){return/^(\.?\/|https?:)/.test(e)?e:n.replace(i,e)};g.getJoinStub=function(e){return e.src.replace(n.split(i)[0],'')};g.assets={}})(null);
