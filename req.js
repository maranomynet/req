(function(){var k=[],s='onreadystatechange',j="onload",t=function(d){var c,e=g.assets,a=g.fixUrl,f=[];for(var p=0,v=d.length;p<v;p++){var b=d[p];if(typeof b=='function'){f.push(b)}else if(b){if(b.charAt){c=b;b=e[c]||(e[c]=(e[a(c)]||{src:c}))}else{c=b.id||b.src;e[c]=e[c]||b}if(!b._1&&!b._0){b._1=1;if(!b._3){b._3=1;b.id=c;if(b.src){b.src=a(b.src);e[b.src]=b}var m=b.req;if(m&&m.charAt){b.req=[m]}}m&&f.push.apply(f,t(b.req));f.push(b)}}}return f},h=[],n=function(){var d,c=h.length;if(c>=g.joinLim){var e=[];while(c--){if(h[c].src){e.unshift(g.getJoinUrl(h[c]))}}d={src:o.replace(i,e.join(g.joint||'')),_4:h};h=[]}else{d=h.shift();d._2=1}return d},q=function(){if(u=!!(k.length||h.length)){var a=k.shift()||n();if(typeof a=='function'){if(h.length){k.unshift(a);a=n()}else{a();a=null}}if(a&&!a._0){if(a.check&&a.check()){if(h.length&&a[j]){k.unshift(n(),a)}else{a._0=1;if(a[j]){a[j]();a[j]=null}}}else{if((a.join===true||!a.src)&&!a._2){h.push(a)}else{if(h.length&&!a._2){k.unshift(a);a=n()}if(a.src){var f=document.createElement('script');if(a.charset){f.charset=a.charset}f.src=a.src;f[j]=f[s]=function(){if(!f.readyState||/^(loaded|complete)$/.test(f.readyState)){f[s]=f[j]=null;var d=a._4||[a];for(var c=0,e;(e=d[c]);c++){e._0=1;e[j]&&e[j]();e[j]=null}q()}};r.appendChild(f);return}a._0=1}}}q()}},u,r,l,o,i,g=Req=function(){i=i||g.urlToken||'%{s}';l=g.baseUrl||i;l+=l.indexOf(i)>-1?'':i;o=g.joinUrl||i;o+=o.indexOf(i)>-1?'':i;r=r||document.getElementsByTagName('head')[0];var d=t([].slice.call(arguments,0)),c=d.length;while(c--){delete d[c]._1}k.unshift.apply(k,d);if(!u){q()}};g.joinLim=1;g.fixUrl=function(d){return/^(\.?\/|https?:)/.test(d)?d:l.replace(i,d)};g.getJoinUrl=function(d){return d.src.replace(l.split(i)[0],'')};g.assets={}})();
